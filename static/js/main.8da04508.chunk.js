(this["webpackJsonpgoit-react-hw-08-phonebook"]=this["webpackJsonpgoit-react-hw-08-phonebook"]||[]).push([[0],{10:function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return o})),n.d(t,"e",(function(){return d})),n.d(t,"c",(function(){return l})),n.d(t,"d",(function(){return j}));var r=n(14),c=n.n(r),a=n(21),s=n(24),i=n(8),u=Object(s.a)({reducerPath:"authApi",baseQuery:Object(i.d)({baseUrl:"https://connections-api.herokuapp.com",prepareHeaders:function(e,t){var n=(0,t.getState)().auth.token;return n&&e.set("authorization","Bearer ".concat(n)),e}}),tagTypes:["User"],endpoints:function(e){return{fetchUsers:e.query({queryFn:function(){var e=Object(a.a)(c.a.mark((function e(t,n,r,a){var s;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a({url:"/users/current"});case 2:return s=e.sent,e.abrupt("return",s);case 4:case"end":return e.stop()}}),e)})));return function(t,n,r,c){return e.apply(this,arguments)}}(),invalidatesTags:["User"]}),registerUser:e.mutation({queryFn:function(){var e=Object(a.a)(c.a.mark((function e(t,n,r,a){var s;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a({url:"/users/signup",method:"POST",body:t});case 2:return s=e.sent,e.abrupt("return",s);case 4:case"end":return e.stop()}}),e)})));return function(t,n,r,c){return e.apply(this,arguments)}}(),invalidatesTags:["User"]}),loginUser:e.mutation({queryFn:function(){var e=Object(a.a)(c.a.mark((function e(t,n,r,a){var s,i;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=Object.assign({},t),e.next=3,a({url:"/users/login",method:"POST",body:s});case 3:return i=e.sent,e.abrupt("return",i);case 5:case"end":return e.stop()}}),e)})));return function(t,n,r,c){return e.apply(this,arguments)}}(),invalidatesTags:["User"]}),logoutUser:e.mutation({queryFn:function(){var e=Object(a.a)(c.a.mark((function e(t,n,r,a){var s;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a({url:"/users/logout",method:"POST"});case 2:return s=e.sent,e.abrupt("return",s);case 4:case"end":return e.stop()}}),e)})));return function(t,n,r,c){return e.apply(this,arguments)}}(),invalidatesTags:["User"]})}}}),o=u.useFetchUsersQuery,d=u.useRegisterUserMutation,l=u.useLoginUserMutation,j=u.useLogoutUserMutation},19:function(e,t,n){e.exports={Link:"Navigation_Link__2YgcM",ActiveLink:"Navigation_ActiveLink__2al1J"}},22:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"d",(function(){return s})),n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return u}));var r=n(24),c=n(8),a=Object(r.a)({reducerPath:"contactApi",baseQuery:Object(c.d)({baseUrl:"https://connections-api.herokuapp.com",prepareHeaders:function(e,t){var n=(0,t.getState)().auth.token;return n&&e.set("authorization","Bearer ".concat(n)),e}}),tagTypes:["Contact"],endpoints:function(e){return{fetchContacts:e.query({query:function(){return"/contacts"},keepUnusedDataFor:0,providesTags:["Contact"]}),addContact:e.mutation({query:function(e){return{url:"/contacts",method:"POST",body:{name:e.name,number:e.number}}},invalidatesTags:["Contact"]}),deleteContact:e.mutation({query:function(e){return{url:"contacts/".concat(e),method:"DELETE"}},invalidatesTags:["Contact"]})}}}),s=a.useFetchContactsQuery,i=a.useAddContactMutation,u=a.useDeleteContactMutation},25:function(e,t,n){e.exports={Container:"UserMenu_Container__Cpe-I",Avatar:"UserMenu_Avatar__1-NGA",Name:"UserMenu_Name__1DYWD"}},28:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(1),c=Object(r.createAction)("contactsFilter")},30:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(34),c=n.n(r),a=n(2),s=function(e){var t=e.children;return Object(a.jsx)("div",{className:c.a.container,children:t})}},34:function(e,t,n){e.exports={container:"Container_container__2sTHi"}},35:function(e,t,n){e.exports={Header:"AppBar_Header__3NJvf"}},52:function(e,t,n){},54:function(e,t,n){"use strict";n.r(t);var r,c=n(0),a=n(23),s=n(13),i=n(5),u=n(37),o=n(17),d=n(1),l=n(15),j=n(32),b=n.n(j),h=n(33),f=n(28),p=Object(d.createReducer)("",Object(o.a)({},f.a,(function(e,t){return t.payload}))),O=n(22),v=n(10),x={user:{name:null,email:null},token:null,isLoggedIn:!1},g=Object(d.createSlice)({name:"auth",initialState:x,extraReducers:function(e){e.addMatcher(v.a.endpoints.fetchUsers.matchFulfilled,(function(e,t){var n=t.payload;e.user=n,e.isLoggedIn=!0})),e.addMatcher(v.a.endpoints.registerUser.matchFulfilled,(function(e,t){var n=t.payload;e.user=n.user,e.token=n.token,e.isLoggedIn=!0})),e.addMatcher(v.a.endpoints.loginUser.matchFulfilled,(function(e,t){var n=t.payload;e.user=n.user,e.token=n.token,e.isLoggedIn=!0})),e.addMatcher(v.a.endpoints.logoutUser.matchFulfilled,(function(e,t){e.user=x.user,e.token=x.token,e.isLoggedIn=!1}))}}).reducer,m={key:"auth",storage:b.a,whitelist:["token"]},k=Object(d.configureStore)({reducer:(r={auth:Object(l.g)(m,g)},Object(o.a)(r,O.a.reducerPath,O.a.reducer),Object(o.a)(r,v.a.reducerPath,v.a.reducer),Object(o.a)(r,"filter",p),r),middleware:function(e){return[].concat(Object(u.a)(e({serializableCheck:{ignoredActions:[l.a,l.f,l.b,l.c,l.d,l.e]}})),[O.a.middleware,v.a.middleware])}}),y=Object(l.h)(k);Object(h.setupListeners)(k.dispatch);n(52);var U=n(3),T=n(30),_=n(19),L=n.n(_),w=n(2);var C=function(){return Object(w.jsxs)("nav",{children:[Object(w.jsx)(s.c,{to:"/",className:L.a.Link,children:"\u0413\u043b\u0430\u0432\u043d\u0430\u044f"}),Object(w.jsx)(s.c,{to:"/contacts",className:L.a.Link,children:"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u044b"})]})};var N=function(){return Object(w.jsxs)("div",{children:[Object(w.jsx)(s.b,{to:"/register",className:L.a.Link,children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"}),Object(w.jsx)(s.b,{to:"/login",className:L.a.Link,children:"\u041b\u043e\u0433\u0438\u043d"})]})},M=n(35),F=n.n(M),A=n(12),S=n(25),q=n.n(S),P=n.p+"static/media/ava.cfeb92c0.png",I=function(e){return e.auth.isLoggedIn},z=function(e){return e.auth.user.name},H=function(e){return e.auth.token};var D=function(){var e=Object(i.e)(z),t=Object(v.d)(),n=Object(A.a)(t,1)[0];return Object(w.jsxs)("div",{className:q.a.Container,children:[Object(w.jsx)("img",{src:P,alt:"",width:"32\r ",className:q.a.Avatar}),Object(w.jsxs)("span",{className:q.a.Name,children:["\u0414\u043e\u0431\u0440\u043e \u043f\u043e\u0436\u0430\u043b\u043e\u0432\u0430\u0442\u044c!",Object(w.jsxs)("span",{children:[" ",e]})]}),Object(w.jsx)("button",{type:"button",onClick:function(){n()},children:"\u0412\u044b\u0439\u0442\u0438"})]})};function B(){var e=Object(i.e)(I),t=Object(i.e)(H),n=Object(v.b)(t,{skip:null===t||e}).isLoading;return Object(w.jsx)(w.Fragment,{children:!n&&Object(w.jsxs)("header",{className:F.a.Header,children:[Object(w.jsx)(C,{}),e?Object(w.jsx)(D,{}):Object(w.jsx)(N,{})]})})}function E(e){var t=e.children,n=e.redirectTo,r=void 0===n?"/":n;return Object(i.e)(I)?t:Object(w.jsx)(U.a,{to:r})}function J(e){var t=e.children,n=e.restricted,r=void 0!==n&&n,c=e.redirectTo,a=void 0===c?"/":c;return Object(i.e)(I)&&r?Object(w.jsx)(U.a,{to:a}):t}var Q=Object(c.lazy)((function(){return n.e(5).then(n.bind(null,64))})),R=Object(c.lazy)((function(){return n.e(7).then(n.bind(null,65))})),Y=Object(c.lazy)((function(){return n.e(6).then(n.bind(null,66))})),G=Object(c.lazy)((function(){return Promise.all([n.e(4),n.e(3)]).then(n.bind(null,67))}));function W(){var e=Object(i.e)(I);return Object(w.jsxs)(T.a,{children:[Object(w.jsx)(B,{}),Object(w.jsx)(c.Suspense,{fallback:Object(w.jsx)("div",{children:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430..."}),children:Object(w.jsxs)(U.d,{children:[Object(w.jsx)(U.b,{path:"/",element:Object(w.jsx)(J,{redirectTo:"/contacts",restricted:!0,children:Object(w.jsx)(Q,{})})}),Object(w.jsx)(U.b,{path:"/register",element:Object(w.jsx)(J,{redirectTo:"/contacts",restricted:!0,children:Object(w.jsx)(R,{})})}),Object(w.jsx)(U.b,{path:"/login",element:Object(w.jsx)(J,{redirectTo:"/contacts",restricted:!0,children:Object(w.jsx)(Y,{})})}),Object(w.jsx)(U.b,{path:"/contacts",element:Object(w.jsx)(E,{redirectTo:"/",children:Object(w.jsx)(G,{})})}),Object(w.jsx)(U.b,{path:"*",element:e?Object(w.jsx)(G,{}):Object(w.jsx)(Q,{})})]})})]})}var K=n(36);a.render(Object(w.jsx)(c.StrictMode,{children:Object(w.jsx)(i.a,{store:k,children:Object(w.jsx)(K.a,{loading:null,persistor:y,children:Object(w.jsx)(s.a,{children:Object(w.jsx)(W,{})})})})}),document.getElementById("root"))}},[[54,1,2]]]);
//# sourceMappingURL=main.8da04508.chunk.js.map